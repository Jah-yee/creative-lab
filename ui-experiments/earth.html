<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>三维地球 - 南极洲视图</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #000;
      font-family: 'Arial', sans-serif;
    }
    
    #container {
      position: absolute;
      width: 100%;
      height: 100%;
    }
    
    .controls {
      position: absolute;
      top: 20px;
      left: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 15px;
      border-radius: 8px;
      z-index: 100;
      max-width: 300px;
    }
    
    .controls h2 {
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 18px;
      color: #3498db;
    }
    
    .controls p {
      margin: 8px 0;
      font-size: 14px;
      line-height: 1.4;
    }
    
    .btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 8px 15px;
      margin: 5px 0;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .btn:hover {
      background-color: #2980b9;
    }
    
    .highlight {
      color: #3498db;
      font-weight: bold;
    }
    
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 24px;
      text-align: center;
    }
    
    .antarctica-info {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 15px;
      border-radius: 8px;
      max-width: 300px;
      z-index: 100;
    }
    
    .antarctica-info h3 {
      margin-top: 0;
      color: #3498db;
    }
  </style>
</head>
<body>
  <div id="container"></div>
  
  <div class="controls">
    <h2>三维地球控制</h2>
    <p>使用鼠标拖动来旋转地球</p>
    <p>使用鼠标滚轮来缩放</p>
    <button class="btn" id="focusAntarctica">聚焦南极洲</button>
    <button class="btn" id="resetView">重置视图</button>
  </div>
  
  <div class="antarctica-info">
    <h3>南极洲</h3>
    <p>南极洲是地球最南端的大陆，98%被冰覆盖，平均厚度约2,160米。</p>
    <p>它是地球上最寒冷、最干燥、风速最高的大陆，也是唯一没有原住民的大陆。</p>
  </div>
  
  <div class="loading" id="loading">加载中...</div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
  
  <script>
    // 等待资源加载
    window.addEventListener('load', init);
    
    let scene, camera, renderer, earth, clouds, controls;
    let antarcticaHighlight;
    
    function init() {
      // 创建场景
      scene = new THREE.Scene();
      
      // 创建相机
      camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
      camera.position.z = 3;
      
      // 创建渲染器
      renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      document.getElementById('container').appendChild(renderer.domElement);
      
      // 添加环境光
      const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
      scene.add(ambientLight);
      
      // 添加定向光（模拟太阳光）
      const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
      directionalLight.position.set(5, 3, 5);
      scene.add(directionalLight);
      
      // 创建地球
      createEarth();
      
      // 创建南极洲高亮
      createAntarcticaHighlight();
      
      // 添加控制器
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.rotateSpeed = 0.5;
      controls.minDistance = 1.5;
      controls.maxDistance = 10;
      
      // 添加事件监听器
      window.addEventListener('resize', onWindowResize);
      document.getElementById('focusAntarctica').addEventListener('click', focusAntarctica);
      document.getElementById('resetView').addEventListener('click', resetView);
      
      // 隐藏加载提示
      document.getElementById('loading').style.display = 'none';
      
      // 开始动画循环
      animate();
    }
    
    function createEarth() {
      // 地球几何体
      const earthGeometry = new THREE.SphereGeometry(1, 64, 64);
      
      // 加载地球纹理
      const textureLoader = new THREE.TextureLoader();
      
      // 地球表面纹理（卫星图像）
      const earthTexture = textureLoader.load('https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-blue-marble.jpg', function() {
        renderer.render(scene, camera);
      });
      
      // 地球凹凸纹理（地形）
      const bumpMap = textureLoader.load('https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-topology.png', function() {
        renderer.render(scene, camera);
      });
      
      // 地球高光纹理（海洋反光）
      const specularMap = textureLoader.load('https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-water.png', function() {
        renderer.render(scene, camera);
      });
      
      // 地球材质
      const earthMaterial = new THREE.MeshPhongMaterial({
        map: earthTexture,
        bumpMap: bumpMap,
        bumpScale: 0.05,
        specularMap: specularMap,
        specular: new THREE.Color(0x333333),
        shininess: 15
      });
      
      // 创建地球网格
      earth = new THREE.Mesh(earthGeometry, earthMaterial);
      scene.add(earth);
      
      // 添加云层
      const cloudsTexture = textureLoader.load('https://cdn.jsdelivr.net/npm/three-globe/example/img/earth-clouds.png', function() {
        renderer.render(scene, camera);
      });
      
      const cloudsMaterial = new THREE.MeshPhongMaterial({
        map: cloudsTexture,
        transparent: true,
        opacity: 0.4
      });
      
      clouds = new THREE.Mesh(
        new THREE.SphereGeometry(1.01, 64, 64),
        cloudsMaterial
      );
      
      scene.add(clouds);
    }
    
    function createAntarcticaHighlight() {
      // 创建南极洲高亮（简化为一个圆盘）
      const antarcticaGeometry = new THREE.CircleGeometry(0.3, 32);
      const antarcticaMaterial = new THREE.MeshBasicMaterial({
        color: 0x3498db,
        transparent: true,
        opacity: 0.5,
        side: THREE.DoubleSide
      });
      
      antarcticaHighlight = new THREE.Mesh(antarcticaGeometry, antarcticaMaterial);
      
      // 将南极洲高亮放置在地球底部
      antarcticaHighlight.position.set(0, -0.97, 0);
      antarcticaHighlight.rotation.x = Math.PI / 2;
      
      scene.add(antarcticaHighlight);
      
      // 添加一个发光效果
      const antarcticaGlowGeometry = new THREE.CircleGeometry(0.35, 32);
      const antarcticaGlowMaterial = new THREE.MeshBasicMaterial({
        color: 0x3498db,
        transparent: true,
        opacity: 0.3,
        side: THREE.DoubleSide
      });
      
      const antarcticaGlow = new THREE.Mesh(antarcticaGlowGeometry, antarcticaGlowMaterial);
      antarcticaGlow.position.set(0, -0.97, 0);
      antarcticaGlow.rotation.x = Math.PI / 2;
      
      scene.add(antarcticaGlow);
    }
    
    function focusAntarctica() {
      // 动画过渡到南极洲视角
      const targetPosition = new THREE.Vector3(0, -3, 0);
      animateCamera(targetPosition);
    }
    
    function resetView() {
      // 动画过渡到默认视角
      const targetPosition = new THREE.Vector3(0, 0, 3);
      animateCamera(targetPosition);
    }
    
    function animateCamera(targetPosition) {
      const startPosition = camera.position.clone();
      const duration = 1000; // 动画持续时间（毫秒）
      const startTime = Date.now();
      
      function updateCamera() {
        const elapsed = Date.now() - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // 使用缓动函数使动画更平滑
        const easeProgress = easeInOutCubic(progress);
        
        camera.position.lerpVectors(startPosition, targetPosition, easeProgress);
        camera.lookAt(scene.position);
        controls.update();
        
        if (progress < 1) {
          requestAnimationFrame(updateCamera);
        }
      }
      
      updateCamera();
    }
    
    // 缓动函数
    function easeInOutCubic(t) {
      return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
    }
    
    function onWindowResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }
    
    function animate() {
      requestAnimationFrame(animate);
      
      // 缓慢旋转云层
      if (clouds) {
        clouds.rotation.y += 0.0003;
      }
      
      // 更新控制器
      controls.update();
      
      // 渲染场景
      renderer.render(scene, camera);
    }
  </script>
</body>
</html>