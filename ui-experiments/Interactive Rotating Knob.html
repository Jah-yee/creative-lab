<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Knob</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #fcfcfa;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 30px;
    }

    .knob-wrapper {
      width: 114px;
      height: 114px;
      position: relative;
      cursor: grab;
      user-select: none;
    }

    .knob-wrapper:active {
      cursor: grabbing;
    }

    .knob-base {
      width: 104px;
      height: 104px;
      position: absolute;
      top: 5px;
      left: 5px;
    }

    .stroke {
      position: absolute;
      width: 114px;
      height: 114px;
      top: -5px;
      left: -5px;
      background: linear-gradient(127deg, #fcfcfa 15%, #cfcfcf 86%);
      border-radius: 50%;
      box-shadow: 
        0.4px 0.4px 0.56px -1.19px rgba(0, 0, 0, 0.23),
        1.21px 1.21px 1.71px -2.38px rgba(0, 0, 0, 0.21),
        3.19px 3.19px 4.51px -3.56px rgba(0, 0, 0, 0.17),
        10px 10px 14.14px -4.75px rgba(0, 0, 0, 0.01);
    }

    .base {
      position: absolute;
      width: 112px;
      height: 112px;
      top: -4px;
      left: -4px;
      background: linear-gradient(127deg, #f4f4f4 15%, #e3e3e3 86%);
      border-radius: 50%;
    }

    .base-blur {
      position: absolute;
      width: 74px;
      height: 74px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(135deg, rgba(227, 227, 227, 0.4) 26%, rgba(110, 110, 110, 0.3) 100%);
      filter: blur(2px);
      border-radius: 50%;
    }

    .knob {
      width: 104px;
      height: 104px;
      position: absolute;
      top: 5px;
      left: 5px;
    }

    .shadow {
      position: absolute;
      width: 72px;
      height: 72px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(127deg, rgb(255, 255, 255) 15%, rgba(110, 110, 110, 0.5) 86%);
      border-radius: 50%;
      box-shadow: 
        0.59px 0.59px 0.83px -0.47px rgba(0, 0, 0, 0.26),
        1.39px 1.39px 1.97px -0.94px rgba(0, 0, 0, 0.26),
        2.54px 2.54px 3.59px -1.41px rgba(0, 0, 0, 0.25),
        4.23px 4.23px 5.98px -1.88px rgba(0, 0, 0, 0.24),
        6.82px 6.82px 9.65px -2.34px rgba(0, 0, 0, 0.23),
        11.17px 11.17px 15.8px -2.81px rgba(0, 0, 0, 0.21),
        19.23px 19.23px 27.2px -3.28px rgba(0, 0, 0, 0.17),
        35px 35px 49.5px -3.75px rgba(0, 0, 0, 0.09);
    }

    .large-edge {
      position: absolute;
      width: 78px;
      height: 78px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(127deg, rgb(255, 255, 255) 15%, rgba(110, 110, 110, 0.5) 86%);
      border-radius: 50%;
    }

    .small-edge {
      position: absolute;
      width: 74px;
      height: 74px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(138deg, #f4f4f4 11%, #cfcfcf 88%);
      border-radius: 50%;
    }

    .surface {
      position: absolute;
      width: 72px;
      height: 72px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(180deg, rgb(242, 242, 242) 0%, rgb(232, 232, 232) 100%);
      border-radius: 50%;
    }

    .rotator {
      width: 72px;
      height: 72px;
      position: absolute;
      top: 16px;
      left: 16px;
      transition: transform 0.1s ease-out;
    }

    .indicator {
      position: absolute;
      width: 10px;
      height: 10px;
      top: 5px;
      left: 50%;
      transform: translateX(-50%);
      background: radial-gradient(50% 50% at 50% 50%, #e85c18 0%, #eb5e17 100%);
      border-radius: 50%;
      box-shadow: inset 0px 0px 1px 0.4px rgba(0, 0, 0, 0.07);
    }

    .info {
      text-align: center;
      color: #666;
    }

    .value {
      font-size: 48px;
      font-weight: 600;
      color: #e85c18;
      margin-bottom: 10px;
    }

    .label {
      font-size: 14px;
      color: #999;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="knob-wrapper" id="knob">
      <div class="knob-base">
        <div class="stroke"></div>
        <div class="base"></div>
        <div class="base-blur"></div>
      </div>
      <div class="knob">
        <div class="shadow"></div>
        <div class="large-edge"></div>
        <div class="small-edge"></div>
        <div class="surface"></div>
      </div>
      <div class="rotator" id="rotator">
        <div class="indicator"></div>
      </div>
    </div>
    
    <div class="info">
      <div class="value" id="value">0</div>
      <div class="label">Drag to rotate</div>
    </div>
  </div>

  <script>
    const knob = document.getElementById('knob');
    const rotator = document.getElementById('rotator');
    const valueDisplay = document.getElementById('value');
    
    let isDragging = false;
    let currentAngle = 0;
    let startAngle = 0;
    
    function getAngle(e, element) {
      const rect = element.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;
      const x = e.clientX - centerX;
      const y = e.clientY - centerY;
      return Math.atan2(y, x) * (180 / Math.PI);
    }
    
    function updateRotation(angle) {
      currentAngle = angle;
      rotator.style.transform = `rotate(${angle}deg)`;
      
      // 将角度转换为 0-100 的值
      let normalizedAngle = ((angle % 360) + 360) % 360;
      let value = Math.round((normalizedAngle / 360) * 100);
      valueDisplay.textContent = value;
    }
    
    function handleStart(e) {
      isDragging = true;
      knob.style.cursor = 'grabbing';
      startAngle = getAngle(e, knob) - currentAngle;
    }
    
    function handleMove(e) {
      if (!isDragging) return;
      e.preventDefault();
      
      const angle = getAngle(e, knob) - startAngle;
      updateRotation(angle);
    }
    
    function handleEnd() {
      isDragging = false;
      knob.style.cursor = 'grab';
    }
    
    // 鼠标事件
    knob.addEventListener('mousedown', handleStart);
    document.addEventListener('mousemove', handleMove);
    document.addEventListener('mouseup', handleEnd);
    
    // 触摸事件（移动端支持）
    knob.addEventListener('touchstart', (e) => {
      const touch = e.touches[0];
      handleStart(touch);
    });
    
    document.addEventListener('touchmove', (e) => {
      if (!isDragging) return;
      const touch = e.touches[0];
      handleMove(touch);
    });
    
    document.addEventListener('touchend', handleEnd);
    
    // 键盘控制
    knob.setAttribute('tabindex', '0');
    knob.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft' || e.key === 'ArrowDown') {
        e.preventDefault();
        updateRotation(currentAngle - 5);
      } else if (e.key === 'ArrowRight' || e.key === 'ArrowUp') {
        e.preventDefault();
        updateRotation(currentAngle + 5);
      }
    });
    
    // 鼠标滚轮控制
    knob.addEventListener('wheel', (e) => {
      e.preventDefault();
      const delta = e.deltaY > 0 ? -5 : 5;
      updateRotation(currentAngle + delta);
    });
  </script>
</body>
</html>